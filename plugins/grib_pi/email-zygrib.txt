zyGrib Mail:

Adresse: gribauto@zygrib.org
Betreff: gribauto

Body:

login: CarCode
code: DD4FA1		(validity: 2013-09-11 15:46 UTC)
area: 33N3E 44N16E
resol: 0.5
days: 8
hours: 3
waves: WW3-MEDIT
meteo: GFS
WIND PRESS PRECIP CAPE GUST
HREL TEMP TMIN TMAX WVSWEL
WVSIG WVMAX WVWIND WVWCAP
WVPRIM WVSCDY CLOUD
compress: BZIP2


sendmail muß eingerichtet sein:
sudo mkdir -p /Library/Server/Mail/Data/spool
sudo gzip /usr/share/man/man1/{postalias.1,postcat.1,postconf.1,postdrop.1,postfix.1,postkick.1,postlock.1,postlog.1,postmap.1,postmulti.1,postqueue.1,postsuper.1,sendmail.1}
sudo gzip /usr/share/man/man5/{access.5,aliases.5,bounce.5,canonical.5,cidr_table.5,generic.5,header_checks.5,ldap_table.5,master.5,mysql_table.5,nisplus_table.5,pcre_table.5,pgsql_table.5,postconf.5,postfix-wrapper.5,regexp_table.5,relocated.5,tcp_table.5,transport.5,virtual.5}
sudo gzip /usr/share/man/man8/{anvil.8,bounce.8,cleanup.8,discard.8,error.8,flush.8,local.8,master.8,oqmgr.8,pickup.8,pipe.8,proxymap.8,qmgr.8,qmqpd.8,scache.8,showq.8,smtp.8,smtpd.8,spawn.8,tlsmgr.8,trivial-rewrite.8,verify.8,virtual.8}
sudo /usr/sbin/postfix set-permissions
sudo chmod 700 /Library/Server/Mail/Data/mta
sudo /usr/sbin/postfix start

und konfiguriert: http://kris.me.uk/2013/02/23/send-email-on-osx-lion-through-gmail.html

http://benjaminrojas.net/configuring-postfix-to-send-mail-from-mac-os-x-mountain-lion/	

Dokumentation siehe: /usr/share/doc/postfix/html/index.html

Check Version Postfix erst mit: postconf mal_version  (>= 2.2 OK)
 ... und verwendete Datenbank hash oder dbm mit: postconf -m
 ... und postconf -n für Konfigurations-Daten

Folgende Änderungen:
sudo nano /etc/postfix/main.cf
Unten einfügen:
smtp_generic_maps = hash:/etc/postfix/generic

sudo nano /etc/postfix/generic
Unten einfügen:
Beispiel: his@localdomain.local	hisaccount@hisisp.example
Dazu erst feststellen his Name und localdomain.local Name mit
whoami --> "his"
hostname --> "localdomain.local"
Ergebnisse in Beispiel oben einsetzen.
Für "hisaccount" Email-Name einsetzen.
Für "hisisp.example" Provider-Domain einsetzen.
Das führt hier zu:
heidi@MacBook.local	carcode@me.com
ACHTUNG: "localdomain.local" kann sich ändern, wenn der Computer in einem anderen Netz betrieben wird!

Anschließend ausführen:
sudo postmap /etc/postfix/generic
und
postfix starten mit
sudo postfix start
oder
sudo postfix reload

Soll sendmail/postfix bei jedem Start des Computers ausgeführt werden,
dann einfügen in /System/Library/LaunchDaemons/org.postfix.master.plist
<key>RunAtLoad</key>
<true/>

Diese Datei sollte dann so aussehen:
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>Label</key>
  <string>org.postfix.master</string>
  <key>Program</key>
  <string>/usr/libexec/postfix/master</string>
  <key>ProgramArguments</key>
  <array>
    <string>master</string>
    <string>-e</string>
    <string>60</string>
  </array>
  <key>QueueDirectories</key>
  <array>
    <string>/var/spool/postfix/maildrop</string>
  </array>
  <key>AbandonProcessGroup</key>
  <true/>
  <key>OnDemand</key>
  <true/>
  <key>RunAtLoad</key>
  <true/>
</dict>
</plist>

Obiges geht nicht. Neuer Anlauf mit:
sudo nano /etc/postfix/sasl_passwd
mit Text: smtp.googlemail.com:587 <username>@googlemail.com:<password>

sudo postmap /etc/postfix/sasl_passwd

sudo nano /etc/postfix/main.cf
mit Text am Ende:
# Minimum Postfix-specific configurations.
mydomain_fallback = localhost
mail_owner = _postfix
setgid_group = _postdrop
relayhost=smtp.googlemail.com:587

# Enable SASL authentication in the Postfix SMTP client.
smtp_sasl_auth_enable=yes
smtp_sasl_password_maps=hash:/etc/postfix/sasl_passwd
smtp_sasl_security_options=

# Enable Transport Layer Security (TLS), i.e. SSL.
smtp_use_tls=yes
smtp_tls_security_level=encrypt
tls_random_source=dev:/dev/urandom

Dann:
sudo postfix start

Bei Fehlern main.cf korrigieren und dann:
sudo postfix reload

Test:
date | mail -s test carcode@me.com

Funktioniert.
****************************************************************
Mail-Kopie: in grib_pi/src/email.cpp
#include "navutil.h"                    // for LogMessageOnce()
    // TODO: check return code
//    wxSystem(cmd.c_str());
    LogMessageOnce(filename);  // Test WXOSX
    wxRemoveFile(filename);
    
    return TRUE;
}
#else
#error Send not yet implemented for this platform.
#endif





****************************************************************
aus grib_pi/src/GribOverlayFactory.cpp:
Ist das die Lösung der 31 Warnings in ocpn_plugin.h RenderOverlay() ?

#if wxUSE_GRAPHICS_CONTEXT
    wxMemoryDC *pmdc;
    pmdc = wxDynamicCast(&dc, wxMemoryDC);
    wxGraphicsContext *pgc = wxGraphicsContext::Create( *pmdc );
    m_gdc = pgc;
    m_pdc = &dc;
#else
    m_pdc = &dc;
#endif
***************************************************************
