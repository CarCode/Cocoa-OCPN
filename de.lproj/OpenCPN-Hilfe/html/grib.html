<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>Grib Plugin</title><link href="../css/common.css" rel="StyleSheet" type="text/css" /><meta name="copyright" value="(C)opyright 2013" /><meta name="topic-status" content="Ready for Review" /><meta name="topic-check-list" content="Ran Smart Index" /></head><body>
<div id="navbox" class="gradient">
  <a name="access"></a><a name="iclMM"></a><a name="MM"></a>
  <div id="navleftbox"><a class="navlink_left" href="../OpenCPN-Hilfe.html">Startseite</a> <a class="navlink_left" href="content.html">Inhalt</a> <a class="navlink_left" href="index.html">Index</a></div>
  </div><!--closes navbox-->
<div id="mainbox"><h1>Grib Plugin</h1><p>OpenCPN hat einen einfachen Grib Wetter Datei Anzeiger Plugin mit einem begrenzten Satz von Features, jedoch nützlich für unterwegs. Es ist nicht möglich,     von OpenCPN aus Grib Dateien herunter zu laden. Es sind jedoch viele externe Quellen für Grib Dateien verfügbar.<br />     <a class="link_extern" href="http://weather.mailasail.com/Franks-Weather/Grib-Files-Getting-And-Using">Franks-Weather&#x0020;</a> ist ein guter Startpunkt.</p><p>Mit den neuen Versionen von OpenCPN wurde das Grib Plugin endlich etwas überarbeitet. Es ist nun auch möglich,     Grib Daten direkt mit dem Plugin von saildocs (siehe unten) oder zygrib.org herunterzuladen. Allerdings ist das noch nicht ganz zu Ende gedacht, die Grib Daten kommen     per eMail-Anhang und müssen noch vom Mailer in das Grib-Verzeichnis per Hand kopiert werden. Zudem muß das Programm sendmail bzw. postfix auf dem Rechner     eingerichtet sein, sonst kann das Grib Plugin keine Anforderungs-Mails an saildoc oder zygrib senden. Für zygrib.org ist außerdem ein Account erforderlich.</p><p>Die Einrichtung von sendmail/postfix auf einem Mac OS X Computer mit noch aktuell Mountain Lion (Maverick steht vor der Tür) ist unten beschrieben.</p>  <ul class="menu">     <li>Zur Anzeige von Grib Dateien als Überlagung auf Ihren normalen Karten muß erst das Grib Symbol aktiviert werden <img src="../images-de/grib_002.png" alt="" height="32" width="32" /></li>     <li>Gehe zu <img src="../images/settings.png" alt="" height="32" width="32" /> Bereich Plugins und aktiviere das GRIB Plugin.</li>  </ul><p align="center"><img src="../images-de/grib-plugin.png" width="767" alt="" /></p><p>In den Einstellungen (Preferences) markieren Sie "GRIB-Symbol anzeigen" und "Hochauflösende Grafik verwenden", da Sie ja eine neuere Computer Hardware haben.</p><p align="center"><img src="../images-de/plugin-grib2.png" width="880" alt="" /></p>  <ul class="menu">     <li>Als nächstes klicken Sie das Symbol auf der Werkzeugleiste und die Grib Display Control Box erscheint.         Verwenden Sie den oberen Teil dieses Fensters zur Auswahl Ihrer Grib Dateien, die Sie von Wetterdiensten         heruntergeladen haben. Die Grib Dateien erscheinen dann in der Liste, siehe Bild oben.</li>     <li>Klicken Sie auf das "&gt;" Zeichen vor der Grib Datei. Die einzelnen Vorhersagen innerhalb der Grib Datei werden dann unter dem Dateikopf angezeigt.</li>     <li>Klick auf eine der Vorhersagen zeigt diese auf der Karte an. Bei Bewegung des Cursors über die Grib Anzeige werden die Werte für Wind usw. an der Cursor Position         im unteren Teil des Fensters "Grib Display Control" angezeigt. Hier kann gewählt werden, welche Grib Werte angesehen werden sollen. Beachten Sie, daß         nicht alle Grib Dateien z.B. Wellen-Daten, Temperatur oder Strömungsdaten enthalten wie in diesem Beispiel oben.</li>     <li>OpenCPN zeigt die meisten Grib Datei Formate an, es ist aber eine relativ neue Funktion. Weitere Fehlermeldungen sind willkommen.</li>  </ul><h3>Was ist eine Grib Datei?</h3>  <ul class="menu">     <li>Sind Sie nicht vertraut mit Grib Wetter Dateien, unterrichten Sie sich bitte über die Grundlagen, bevor Sie sie verwenden. Es ist wichtig, die Grenzen der         Wetter-Vorhersagen im Grib Format zu verstehen. Es sollte auch darauf hingewiesen werden, daß Gribs <strong>nicht</strong> nahe von tropischen Systemen         anwendbar sind.</li>     <li>Als Startpunkt für Gribs und Suche nach Quellen für Downloads kann <a class="link_extern" href="http://weather.mailasail.com/Franks-Weather/Grib-Files-Getting-And-Using">Franks-Weather</a>          helfen.</li>     <li>Ein sehr gutes Buch ist von David Burch: Modern Marine Weather, mit einer tieferen Behandlung des Themas.</li>     <li>Einige Dateien und Lektüre über tropisches Wetter und Gribs sind <a class="link_extern" href="http://www.pangolin.co.nz/jetsam/view_article.php?idx=19">hier verfügbar.</a></li>     <li><a class="link_extern" href="http://www.zygrib.org/index.php?page=abstract_en">zyGrib</a> ist ein freier und Open-Source Software (FOSS) Grib Anzeiger.</li>     <li>Eine einfache Art zum Erhalt von Grib-Dateien für ein bestimmtes Gebiet ist die Verwendung des kostenlosen Dienstes von <b>Saildoc</b>. Man sendet eine Email an Saildoc mit einem bestimmten         Textinhalt und bekommt kurze Zeit später eine Email von Saildoc zurück mit der gewünschten Grib-Datei im Anhang der Email. Das Format der Email an Saildoc muß folgendermaßen         sein:         <ul class="menu">         <li>Die Email-Adresse ist: query@saildocs.com</li>         <li>Die Betreff-Zeile der Email an Saildoc ist beliebig: z.B. Wetter</li>         <li>Der Text der Email muß einem bestimmten Schema entsprechen und soll nur eine Zeile enthalten.<br />             Beispiel: send gfs:35N,44N,03E,12E|0.5,0.5|0,3..180|PRMSL,WIND,SEATMP,AIRTMP,WAVES<br />             Das Schlüsselwort "send" veranlaßt Saildoc, eine Email zu senden.<br />             Die dann folgende Zeichenkette darf keine Leerzeichen enthalten.<br />             "gfs:" weist Saildoc an, das globale Grib Modell der NOAA zu verwenden (andere Modelle sind ebenfalls verfügbar).<br />             Dann folgt die Beschreibung des gewünschten Gebiets im Format Breite1,Breite2,Länge1,Länge2, in diesem Beispiel also 35N,44N,03E,12E.<br />             Die weiteren Felder der Zeichenkette werden durch das Zeichen "&#166;" getrennt. Sie sind optional und umfassen mit z.B. mit "0.5,0.5" die geografische Auflösung in einem halben Grad. Diese             Auflösung ist Modell-spezifisch und beeinflußt die Größe der gesendeten Datei. Bei "gfs" sind 0.5 Grad bei einer Vorhersage im Zeit-Format "0,3..180" und 2.5 Grad             bei einer Vorhersage im Zeit-Format "192,204..384" erlaubt.<br />             Damit sind wir bereits beim nächsten Feld, den abzufragenden Vorhersagezeiten in Stunden. Das kann entweder als eine Reihe             von Stunden eingegeben werden (0,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48 - also alle 3 Stunden für 2 Tage) oder wie hier in einer Kurzform mit "0,3..180" (also alle 3             Stunden für 7,5 Tage.<br />             Das letzte Feld enthält die gewünschten Parameter. Das sind beim "gfs" Modell die Parameter PRSML für Luftdruck auf Höhe Meeresoberfläche,             WIND für Windstärke in 10 m Höhe, SEATMP für Temperatur Meeresoberfläche, AIRTMP für Lufttemperatur in 2 m Höhe und WAVES für Wellenhöhe.<br />             Werden diese optionalen Felder nicht angegeben, dann werden Default-Werte verwendet. Das sind für Auflösung "2,2", für Vorhersagezeit "24,48,72" und für Parameter             der Luftdruck und der Wind.<br />             Die von Saildoc erhaltene Grib-Datei wird dann aus der Email im beim Grib-Plugin angegebenen Platz kopiert.</li>         </ul></li>     <li>Um Grib Daten von zygrib zu erhalten, sollte man sich dort anmelden mit Anwendername und Paßwort. Zusätzlich ist ein persönlicher Code erforderlich, wenn man per eMail         die Daten erhalten möchte. Dieser Code ist zeitlich begrenzt und muß bei Ablauf erneuert werden.<br />         Siehe dazu: <a class="link_extern" href="http://www.zygrib.org/index.php?page=gribauto">zyGrib</a> Also erst im zyGrib-Forum registrieren und dann auf dieser Seite den Code generieren.</li>  </ul><h3>Anleitung zur Installation/Konfiguration von send/postfix für Mac OS X Mountain Lion</h3>  <p>Nach etwas Internetsuche habe ich es geschafft, sendmail/postfix auf Mac OS X Mountain Lion zu konfigurieren. Ohne das kann man die eMail Plugin Funktion des Grib Plugins nicht verwenden.     Das normale Mail Programm des Betriebssystems geht dafür nicht. sendmail/postfix sind Teil des Betriebssystems Mac OS X. Erforderlich ist auf jeden Fall ein einigermaßen sicherer     Umgang mit dem Terminal (auch Befehls-Konsole genannt). Das folgende Beispiel behandelt einen Mail-Account bei Google-Mail. Die Einstellungen müssen mit Superuser-Rechten     (sudo) vorgenommen werden. Befehle mit vorangestelltem <i>sudo</i> erfordern also die Eingabe des Superuser-Paßworts. Als Editor habe ich in diesem Beispiel nano verwendet.</p>  <ul class="menu">     <li>Schritt 1: Zur Installation von postfix verwenden Sie zunächst folgende 6 Befehle der Reihe nach im Terminal:<br />         <i>sudo mkdir -p /Library/Server/Mail/Data/spool<br /><br />            sudo gzip /usr/share/man/man1/{postalias.1,postcat.1,postconf.1,postdrop.1,postfix.1,postkick.1,postlock.1,postlog.1,postmap.1,postmulti.1,postqueue.1,postsuper.1,sendmail.1}<br /><br />            sudo gzip /usr/share/man/man5/{access.5,aliases.5,bounce.5,canonical.5,cidr_table.5,generic.5,header_checks.5,ldap_table.5,master.5,mysql_table.5,nisplus_table.5,pcre_table.5,pgsql_table.5,postconf.5,postfix-wrapper.5,regexp_table.5,relocated.5,tcp_table.5,transport.5,virtual.5}<br /><br />            sudo gzip /usr/share/man/man8/{anvil.8,bounce.8,cleanup.8,discard.8,error.8,flush.8,local.8,master.8,oqmgr.8,pickup.8,pipe.8,proxymap.8,qmgr.8,qmqpd.8,scache.8,showq.8,smtp.8,smtpd.8,spawn.8,tlsmgr.8,trivial-rewrite.8,verify.8,virtual.8}<br /><br />            sudo /usr/sbin/postfix set-permissions<br /><br />            sudo chmod 700 /Library/Server/Mail/Data/mta</i></li>     <li>Schritt 2: Im Terminal eingeben:<br />         <i>sudo nano /etc/postfix/sasl_passwd</i><br />         zum Erstellen der Datei sasl_passwd mit diesem Text:<br />         <pre>smtp.googlemail.com:587 IhrAnwendername@googlemail.com:IhrPasswort</pre><br />         Ersetzen Sie IhrAnwendername und IhrPasswort mit Ihren Daten. Speichern in nano mit Ctrl-O und verlassen mit Ctrl-X.</li>     <li>Schritt 3: Die neuen Daten bekannt machen mit dem Terminal-Befehl:<br />         <i>sudo postmap /etc/postfix/sasl_passwd</i></li>     <li>Schritt 4: Die Haupt-Konfigurationsdatei ergänzen mit folgendem Text unter Verwendung von diesem Befehl:<br />         <i>sudo nano /etc/postfix/main.cf</i><br />         Am Ende von main.cf also einfügen:<br />         <pre># Minimum Postfix-specific configurations.mydomain_fallback = localhostmail_owner = _postfixsetgid_group = _postdroprelayhost=smtp.googlemail.com:587# Enable SASL authentication in the Postfix SMTP client.smtp_sasl_auth_enable=yessmtp_sasl_password_maps=hash:/etc/postfix/sasl_passwdsmtp_sasl_security_options=# Enable Transport Layer Security (TLS), i.e. SSL.smtp_use_tls=yessmtp_tls_security_level=encrypttls_random_source=dev:/dev/urandom</pre><br />         Wieder speichern und verlassen wie oben.</li>     <li>Schritt 5: Jetzt kann postfix gestartet werden mit:<br />         <i>sudo postfix start</i><br />         Erhalten Sie Fehler, korrigieren Sie evtl. main.cf und starten dann postfix erneut mit:<br />         <i>sudo postfix reload</i></li>     <li>Schritt 6: Mit diesem Befehl können Sie z.B. einen Test machen:<br />         <i>date | mail -s test IhrAnwendername@googlemail.com</i><br />         ... oder eine beliebige andere Ihrer eMail-Adressen, die Sie empfangen können.</li>  </ul>  <p>Damit Sie <i>postfix</i> nicht nach jedem Rechnerstart erneut starten müssen, können Sie im Launchdaemon 2 Zeilen einfügen:</p><br />     <pre>&lt;key&gt;RunAtLoad&lt;/key&gt;&lt;true/&gt;</pre><br /><p>Mit folgendem Befehl ändern Sie die Datei org.postfix.master.plist:<br />     <i>sudo nano /System/Library/LaunchDaemons/org.postfix.master.plist</i><br />     Die Datei sollte dann so aussehen:</p><br />     <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;&lt;plist version="1.0"&gt;&lt;dict&gt;  &lt;key&gt;Label&lt;&lt;/key&gt;  &lt;string&gt;org.postfix.master&lt;/string&gt;  &lt;key&gt;Program&lt;/key&gt;  &lt;string&gt;/usr/libexec/postfix/master&lt;/string&gt;  &lt;key&gt;ProgramArguments&lt;/key&gt;  &lt;array&gt;    &lt;string&gt;master&lt;/string&gt;    &lt;string&gt;-e&lt;/string&gt;    &lt;string&gt;60&lt;/string&gt;  &lt;/array&gt;  &lt;key&gt;QueueDirectories&lt;/key&gt;  &lt;array&gt;    &lt;string&gt;/var/spool/postfix/maildrop&lt;/string&gt;  &lt;/array&gt;  &lt;key&gt;AbandonProcessGroup&lt;/key&gt;  &lt;true/&gt;  &lt;key&gt;OnDemand/lt;/key&gt;  &lt;true/&gt;  &lt;key&gt;RunAtLoad&lt;/key&gt;  &lt;true/&gt;&lt;/dict&gt;&lt;/plist&gt;</pre><p>In der neuen Version des Grib Plugins kann nun mit saildocs oder zygrib die Grib-Anforderung erfolgen:</p><p align="center"><img src="../images-de/plugin-grib3.png" width="548" alt="" /></p><p align="center"><img src="../images-de/plugin-grib4.png" width="579" alt="" /></p></div><hr /><p align="left"><a href="plugins.html">Zurück zu Plugins --&gt;</a></p><p align="right"><a href="calcpg.html">Weiter mit Calculator Plugin --&gt;</a></p></body></html>