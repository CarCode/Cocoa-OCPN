<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>Einstellungen Verbindungen</title><link href="../css/common.css" rel="StyleSheet" type="text/css" /><meta name="copyright" value="(C)opyright 2013" /><meta name="topic-status" content="Ready for Review" /><meta name="topic-check-list" content="Ran Smart Index" /></head><body><div id="navbox" class="gradient">  <a name="access"></a><a name="iclMM"></a><a name="MM"></a>  <div id="navleftbox"><a class="navlink_left" href="../OpenCPN-Hilfe.html">Startseite</a> <a class="navlink_left" href="content.html">Inhalt</a> <a class="navlink_left" href="index.html">Index</a></div>  </div><!--closes navbox--><div id="mainbox"><h1>Einstellungen Verbindungen</h1><p>In OpenCPN ab Version 3.2 ist die Schnittstelle für externe Daten (GPS, AIS usw.) komplett überarbeitet worden. Bei Klick auf den Punkt "Verbindungen" sehen     Sie zunächst den Fensterinhalt wie oben im Bild (wurde noch nichts konfiguriert, ist die Liste "Daten-Verbindungen" noch leer). Erst bei Klick auf den Button "Verbindung hinzu"     oder auf einen schon bestehenden Eintrag in der Liste sieht das Fenster wie unten aus (eventuell muß das Fenster aufgezogen werden).</p><p align="center"><img src="../images-de/toolbox1a.png" width="779" alt="" /></p><p>Doch der Reihe nach von oben:</p><p><strong>NMEA Kurs- und Geschwindigkeitsdaten filtern, Filterperiode (s)</strong> Damit wird ein Mittelwert von Kurs-über-Grund (COG) und Geschwindigkeit-über-Grund (SOG)     mit einer konfigurierbaren Datenrate gebildet. Diese Funktion ist z.B. sinnvoll, wenn die Daten vom GPS aufgrund des Seegangs stark variieren. Das Dashboard Plugin ist davon nicht     betroffen, COG und SOG werden etwa jede Sekunde erneuert.</p><p><strong>Zeige NMEA-Datenfluß</strong> Ist dies aktiviert, erhalten Sie ein Fenster mit den NMEA Datensequenzen für OpenCPN. Sind Filter für NMEA Datensequenzen     eingeschaltet, wird das entsprechend der Legende in diesem Fenster angezeigt.<br />     Die Schaltfläche Pause stoppt den Datenfluß im Fenster, mit Weiter wird er wieder aufgenommen. Sollen NMEA Daten in eine Datei gespeichert werden, verwenden Sie dazu     das <a href="vdrpg.html">VDR Plugin</a>.<br />     Wird gpsd verwendet, werden keine Daten angezeigt. Zur einfachen NMEA Datenstrom-Analyse fügen Sie folgende Zeile in die Datei opencpn.ini     unter [Settings] ein:      <br /><em>DebugNMEA=1500</em>     <br />Damit erhalten Sie bis zu 1500 Analyse-Nachrichten über den NMEA Verkehr im opencpn.log</p><p align="center"><img src="../images-de/toolbox1d.png" alt="" width="747" /></p><p>Hier in diesem Beispiel oben ist auch zu sehen, wie im Datenfluß GPS-Daten (mit Prefix $GP) und AIS-Daten (mit Prefix !AI) erscheinen. Jede Zeile enthält den     Zeitstempel, die Datenquelle und die Datensequenz. Wurde ein Filter gesetzt oder ein Datenausgang spezifiert, erscheinen die Zeilen in der entsprechenden Farbe     wie in der Legende erläutert.</p><p align="center"><img src="../images-de/toolbox1c.png" width="900" alt="" /></p><p>In diesem Beispiel wurde für den GPS-Eingang ein Filter gesetzt, der nur RMC und GLL Sequenzen durchläßt.</p><p><strong>Upload-Format für Furuno GP3X</strong><br />     Für ausgehende Datenverbindung an Furuno Geräte zu aktivieren, weil Furuno eine eigene NMEA-Version zum Hochladen von Routen verwendet. Die     OpenCPN-Routen dürfen nicht zweistellig numerisch benannt sein (z.B. 10, 21 usw.).</p><p><strong>Verwende Garmin GRMN (Host) Modus für Uploads</strong><br />     Für ausgehende Datenverbindung an Garmin Geräte zu aktivieren, weil Garmin Geräte kein Hochladen mit Standard-NMEA akzeptieren.</p><p><strong>Verwende magn. Peilung in Ausgangs-Sequenz ECAPB</strong> Für Autopiloten die die magnetischen Daten falls vorhanden haben wollen.</p><p><strong>Daten-Verbindungen</strong> Liste der Datenverbindungen (aktiv/passiv), löschen und/oder hinzufügen mit den Einstellungen des Fensters Eigenschaften.</p><p><strong>Eigenschaften</strong><br />Dieser Bereich des Fensters erscheint, wenn "Verbindung hinzu" geklickt wurde oder ein Eintrag der Liste markiert wurde.<br />     Im ersten Fall muß die neue Verbindung konfiguriert werden, im zweiten Fall kann eine Verbindungs-Konfiguration geändert werden. Anschließend klickt man     entweder auf "Anwenden" oder "OK", wenn die Konfigurationen abgeschlossen sind und die Einstellungen beendet werden sollen.<br /><br />     Zunächst entscheidet man sich, ob ein serielles (virtuelles) Gerät oder ein Netzwerk angeschlossen werden soll. Im Beispiel Bild oben wurde ein serielles     Gerät konfiguriert. Bei <b>Port</b> kann man mit Klick auf das Pfeil-Gadget eine Klappliste mit verfügbaren Ports öffnen.</p><p align="center"><img src="../images-de/rbt-mac-ocpn1.png" alt="" width="540" /></p><p>Erscheint Ihr GPS oder sonstiges Gerät nicht in der Klappliste, können Sie es auch in dem Feld von Hand eintragen.<br />     Aus der Klappliste daneben wählen Sie bitte die <b>Baudrate</b>, die Ihr Gerät unterstützt. 4800 ist der normale Wert für viele Geräte, aber einige neuere GPS     Empfänger verlangen einen anderen Wert. Prüfen Sie die Dokumentation.</p><p><strong>Details für Mac OS X:</strong> Der Gerätename beginnt üblicherweise mit /dev/cu...<br />     Geben Sie in einem Terminal-Fenster den Befehl <i>ls /dev/cu*</i> ein, um alle auf Ihrem System vorhandenen Geräte zu sehen.</p><p>Ist ein richtig konfiguriertes GPS verbunden, eingeschaltet und erkannt, dann wird ein grünes <img src="../images/gpsGrn.png" height="28" width="28" /> Symbol oder das GPS Status Symbol     <img src="../images/gps2.png" height="28" width="28" alt="" /> oben rechts in der Werkzeugleiste gezeigt. OpenCPN konfiguriert automatisch die Bits, Parity usw. Es     muß nicht extra spezifiziert werden.</p><p><a href="gpseinr.html">Weiteres auch unter GPS Einrichten.</a></p><p><strong>Protokoll</strong> Momentan ist nur NMEA0183 möglich, NMEA2000 wird vielleicht noch kommen. Allerdings wird für NMEA2000 spezielle Hardware benötigt,     da NMEA2000 kein serielles sondern ein CAN Protokoll ist, das nur mit einem CAN zu Seriell/USB Adapter an einen Computer übertragen werden kann.</p><p><strong>Priorität</strong> Kann zwischen 0 und 9 gesetzt werden. Sie ist z.B. für den Fall gedacht, daß verschiedene angeschlossene Geräte unter Umständen eine     gleiche NMEA-Sequenz senden, von denen ein Gerät bevorzugt werden soll und nur bei dessen Ausfall die Sequenz von dem anderen Gerät genommen werden soll. Einstellung     "0" ist die höchste Priorität.</p><p><strong>Prüfe Checksumme</strong> Aktiviert werden nur geprüfte Sequenzen durchgelassen.</p><p><strong>Verwende Garmin GRMN/GRMN (Host) Modus für Uploads</strong>     Muß aktiviert sein, wenn Sie ein Garmin GPS verwenden, weil Garmin keine Uploads mit dem Standard NMEA 0183 unterstützt. Das ist ein Manko aller Garmin     Empfänger.</p><p><strong>Upload-Format für Furuno GP3X</strong> Wie oben bei Furuno.</p><p><strong>Eingang- bzw. Ausgang-Filter</strong> Hier können NMEA Sequenzen angegeben werden, die entweder berücksichtigt oder verworfen werden sollen.</p><p align="center"><img src="../images-de/filtering.png" width="752" alt="" /></p><p>Mit Klick auf den Button <img src="../images/action-filter.png" width="28" alt="" /> öffnet sich ein Fenster zur Auswahl der Sequenzen:</p><p align="center"><img src="../images-de/toolbox1b.png" alt="" width="285" /></p><p>Viele NMEA Sequenzen sind bereits in der Liste enthalten. Es können einzelne oder alle ausgewählt werden oder die Auswahl gelöscht werden.     Mit dem Button "Hinzu" kann auch eine eigene Sequenz hinzugefügt werden, die den Standards entsprechen muß, um keine Fehlermeldung zu bekommen.</p><p><strong>Informationen zu NMEA Sequenzen: <a href="nmeaseq.html">Siehe unter NMEA Sequenzen</a></strong></p><p align="center"><img src="../images-de/sentence-filters1.png" width="342" alt="" />&#x0020;&#x0020;&#x0020;&#x0020;<img src="../images-de/sentence-filters2.png" width="478" /></p><p>Wird eine NMEA Sequenz an einer Eingangs-Verbindung gefiltert, erreicht sie immer noch den internen Multiplexer. Daher ist sie auch an einer Ausgangs-Verbindung verfügbar, wenn sie dort nicht     auch ausgefiltert wird, mit Ausnahme des Durchreichens einer Netzwerk-Verbindung vom Eingang zum Ausgang. Haben Sie eine UDP Verbindung und eine Broadcast-Adresse als Ausgang, setzen Sie die     Priorität der Verbindung niedriger als jede reale NMEA Quelle.</p><p>Einige Beispiele:</p><p><strong>Eingang Filterung</strong></p><p align="center"><img src="../images-de/in1.png" width="735" alt="" /></p><p>Mit obigem Filter steht dann in der Verbindungen-Zeile: <b>Eingang: Nur AIVDM,AIVDO, Ausgang: Kein</b></p><p align="center"><img src="../images-de/in2.png" width="735" alt="" /></p><p>Ist stattdessen "Abgewiesene Sequenzen" gewählt, steht in der Zeile: <b>Eingang: Alle außer AIVDM,AIVDO, Ausgang: Kein</b></p><p><strong>Ausgang Filterung</strong></p><p align="center"><img src="../images-de/out1.png" width="735" alt="" /></p><p>Ähnlich wie bei der Eingangsfilterung oben werden hier die drei Sequenzen gesendet und in der Zeile steht: <b>Eingang: Kein, Ausgang: Nur WPL,GSV,GPwpl</b></p><p align="center"><img src="../images-de/out2.png" width="735" alt="" /></p><p>Und hier werden sie stattdessen verworfen, in der Zeile steht: <b>Eingang: Kein, Ausgang: Alle außer WPL,GSV,GPwpl</b></p><p><strong>Ausgang an diesen Port (als Autopilot oder NMEA Repeater)</strong> Schließlich kann der Port auch als Ausgang definiert werden zu einem Autopiloten oder einem     anderen NMEA Gerät. Verwenden Sie eventuell auch die Filterfunktion, wenn Ihr Autopilot z.B. die Sequenz RMC benötigt. Die meisten Autopiloten wollen hingegen die     RMB Sequenz haben.</p><p>Wird statt <b>"Seriell"</b> ein <b>"Netzwerk"</b> für eine neue Datenverbindung gewählt, sehen die Eigenschaften anders aus:</p><p align="center"><img src="../images-de/toolbox1n.png" alt="" width="754" /></p>   <p><strong>Protokoll</strong> Es kann zwischen TCP, UDP und GPSD gewählt werden. Im Beispiel (Bild oben) ist als <b>Adresse</b> die Internet-Adresse eines Servers in San Francisco     mit seinem zugehörigen <b>Port</b> eingetragen, der AIS-Rohdaten sendet. Dieser Eintrag wird dann mit Button "OK" oder "Anwenden" in die Liste der Daten-Verbindungen übernommen.<br />     TCP ist das Standard Internet Protokoll und wird so zur Übertragung der Daten des AIS-Servers benutzt. Bei der Kommunikation mit TCP-fähigen, interaktiven  NMEA Geräten wird     üblicherweise der Port 10110 verwendet und nicht UDP. UDP ist das ideale Protokoll zur Verteilung von NMEA Daten, da nicht verbindungs-orientiert (kein Client-Server).</p><p align="center"><img src="../images-de/toolbox1o.png" width="884" alt="" /></p><p><strong>GPSD</strong> (Bild oben) ist ein GPS Server, von dem mehrere verschiedene Applikationen Daten beziehen können. Datenserver ist normalerweise "localhost", aber man kann einen GPSD Server     in einem lokalen Netzwerk mit vielen OpenCPN Clients haben. In dem Fall wird die Netzwerk-Adresse des GPSD Servers angegeben. Mit OpenCPN können sogar <strong>Windows</strong> Instanzen     so zu einem GPSD Server verbunden werden. Der Standard Port für GPSD ist 2947.</p><p><strong>Weitere Beispiele der neuen Schnittstelle für Verbindungen</strong></p><p>Hat man keinen AIS-Datenempfänger zur Verfügung, kann man zumindest zu Hause mit einer Internet-Verbindung AIS-Rohdaten von bestimmten Quellen im Internet beziehen und so mal AIS mit OpenCPN testen.     Im Beispiel unten wurde solch ein Sender in San Francisco konfiguriert:</p><p align="center"><img src="../images-de/AIS-sf.png" alt="" width="900" /></p><p>Man muß dann natürlich auf der OpenCPN-Karte in das Gebiet von San Francisco gehen, um die Schiffe dort zu sehen. Mit der neuen Geräte-Schnittstelle von OpenCPN sind jetzt also sowohl serielle     (virtuelle) als auch Netzwerk-Anschlüsse möglich. Zudem können Ein- und Ausgänge nach bestimmten Daten-Sequenzen gefiltert werden.</p><p>Im folgenden Beispiel werden 2 Computer, das VDR-Plugin (Voyage-Data-Recorder), externes GPS-Gerät und UDP verwendet:</p><p align="center"><img src="../images-de/Connect-net1.png" alt="" width="649" /></p><p>Auf dem Haupt-Computer mit der IP-Adresse 192.168.0.9 wurde eine mit VDR aufgenommene Datei mit GPS-, AIS- und DSC-Daten geöffnet. Für den zweiten Computer ist seine IP-Adresse     192.168.0.2 mit Port 4661 mit UDP und "Ausgang an diesen Port" (Output on this Port) eingestellt. Port 4661 wurde hier nur genommen, weil dieser Port auf den Firewalls der Computer offen war.     Auf dem zweiten Computer sind die Einstellungen ebenso, die Adresse zum Haupt-Computer ist 192.168.0.9. Mit diesen Einstellungen werden die Daten der VDR-Datei problemlos zum zweiten     Computer übertragen.<br />     Dann wurde VDR gestoppt, ein GPS angeschlossen und eine neue Verbindung /dev/ttyUSB0 hinzugefügt.</p><p align="center"><img src="../images-de/Connect-net2.png" alt="" width="656" /></p><p>Mit diesen Einstellungen und keinen Änderungen am zweiten Computer wurde die GPS-Position zum zweiten Computer gespiegelt.<br />     Das nur mal zur Anschauung, was mit der neuen Schnittstelle möglich ist.</p><h4>Weitere Anmerkungen zu Verbindungen</h4>  <p><ul class="menu">     <li>Wird eine NMEA Sequenz am Eingang ausgefiltert, erreicht sie weiterhin den internen Multiplexer. Daher ist sie am Ausgang verfügbar, wenn sie dort nicht auch ausgefiltert wird.         Das geht nur bei seriellen Verbindungen. Bei einer Netzwerk-Verbindung ist kein Durchreichen vom Eingang zum Ausgang möglich.</li>     <li>Erfolgt UDP Re-Broadcasting, sollte die Priorität des realen NMEA Eingangs etwas höher als der UDP Datenstrom gesetzt werden, um Probleme zu vermeiden. Grund dafür ist,         daß beim Broadcasting Sie die Nachricht ebenfalls erhalten, die wiederum gesendet wird. Dadurch werden reale einkommende Daten dupliziert. Setzen Sie die UDP         Priorität auf "0" und die reale einkommende Verbindung auf "1" oder höher.</li>     <li>Bei Verwendung von UDP ist eine UDP Adresse nur für ausgehende Verbindung erforderlich und kann bei Broadcast x.x.x.255 sein. Bei eingehender Verbindung ist eine UDP Adresse         nicht unbedingt erforderlich aber Empfohlen. Die Port-Nummer muß jedoch immer angegeben werden, der Standard Port ist 10110.</li>     <li>NMEA Daten können auch vom VDR Plugin kommen. Sie sind als solche im NMEA Datenfenster gekennzeichnet und haben die Priorität "0".</li>     <li>Weitere Tipps + Tricks zu Verbindungen <a href="faq.html">siehe unter FAQ.</a></li>     </ul></p></div><hr /><p align="left"><a href="einstellung.html">Zurück zur Übersicht Einstellungen --&gt;</a></p><p align="right"><a href="schiffe.html">Weiter mit Schiffe --&gt;</a></p></body></html>